<!DOCTYPE html>
<html>

<head>
	<title>Swiss Wutan's Unique Centralized Calendar Everyone Ever Wished We Had But Never Dared to Ask For</title>
	<meta charset="utf-8" />
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/@mdi/font@4.x/css/materialdesignicons.min.css" rel="stylesheet">
	<link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
	<script async defer src="https://apis.google.com/js/api.js"></script>
</head>

<body>
	<div id="app">
		<v-app>
			<v-content>
				<v-container>
					<v-card>
						<v-toolbar flat color="red darken-2" dark>
							<v-toolbar-title>Authenticate on Google Calendar</v-toolbar-title>
						</v-toolbar>
						<v-card-text>
							<p>The goal of this page is to demo a workable, in-house
								alternative to Facebook for managing Swiss Wutan's events. Reasons to go all-in with
								Facebook are (a) Facebook is the ultimate owner of the content it hosts; (b) Facebook
								has a
								poor record in protecting users' privacy, (c) Facebook is extremely opaque and has poor
								programming interfaces and finally (d) it's always good not to put all one's eggs in the
								same basket, i.e. not assume everyone likes to use Facebook for managing
								community-driven time schedules. And if you still are in love with Facebook you can use
								<a href="https://www.facebook.com/help/152652248136178/">these instructions</a> to
								export Facebook's events to Google Calendar.</p>
							<p>Onto the concept. It works like this.
								<ol>
									<li>Anyone -- perhaps an individual or
										institutional member of Swiss Wutan, but not necessarily -- can submit events to
										the
										SWISS WUTAN CALENDAR -- displayed here below</li>
									<li>People vested with an
										"admin" role can accept or reject events submissions. This process is explained
										below.</li>
								</ol>
							</p>At the end of the day this removes all the bureaucratic shenanigans so that we can all
							focus on what matters -- <em>Wutan!</em>
						</v-card-text>
						<v-card class="d-flex pa-2" outlined tile>
							<v-card-actions>
								<v-btn v-if='!authorized' @click="handleAuthClick">Log in</v-btn>
								<v-btn v-if='authorized' @click="handleSignoutClick">Log out</v-btn>
							</v-card-actions>
						</v-card>
					</v-card>
				</v-container>
				<v-container>
					<v-card>
						<v-toolbar flat color="red darken-2" dark>
							<v-toolbar-title>Accept or reject events submissions</v-toolbar-title>
						</v-toolbar>
						<v-card-text>This section lets you switch between events submitted but not yet
							validated (i.e. accepted or rejected) and events already scheduled events.</v-card-text>
						<v-card class="d-flex pa-2" outlined tile>
							<v-tabs color="red darken-2" v-model="active_tab" vertical>
								<v-tab key="0">Submitted events</v-tab>
								<v-tab key="1">Scheduled events</v-tab>
								<!-- SUBMITTED EVENTS -->
								<v-tab-item key="0">
									<v-card flat>
										<div v-if="authorized">
											<v-simple-table v-if="submittedEvents">
												<template v-slot:default>
													<thead>
														<tr>
															<th class="text-left">Select</th>
															<th class="text-left">Title</th>
															<th class="text-left">Start</th>
															<th class="text-left">End</th>
															<th class="text-left">Location</th>
														</tr>
													</thead>
													<tbody>
														<tr v-for="pe in submittedEvents">
															<td>
																<v-checkbox v-model="selectedSubmittedEvents"
																	:value="pe"></v-checkbox>
															</td>
															<td>{{ pe.summary }}</td>
															<td>{{ pe.start.dateTime }}</td>
															<td>{{ pe.end.dateTime }}</td>
															<td>{{ pe.location }}</td>
														</tr>
													</tbody>
												</template>
											</v-simple-table>
										</div>
										<div v-else>
											<v-card-text>You need to be logged in to see submitted events.</v-card-text>
										</div>
									</v-card>
								</v-tab-item>
								<!-- CONFIRMED EVENTS -->
								<v-tab-item key="1">
									<v-card flat>
										<v-simple-table v-if="events">
											<template v-slot:default>
												<thead>
													<tr>
														<th class="text-left">Title</th>
														<th class="text-left">Start</th>
														<th class="text-left">End</th>
														<th class="text-left">Location</th>
													</tr>
												</thead>
												<tbody>
													<tr v-for="e in events">
														<td>{{ e.summary }}</td>
														<td>{{ e.start.dateTime }}</td>
														<td>{{ e.end.dateTime }}</td>
														<td>{{ e.location }}</td>
													</tr>
												</tbody>
											</template>
										</v-simple-table>
									</v-card>
								</v-tab-item>
							</v-tabs>
						</v-card>
						<v-card-actions>
							<v-btn v-if="authorized && selectedSubmittedEvents.length > 0"
								@click="validateEvents(true)">
								Accept submitted event(s)</v-btn>
							<v-btn v-else-if='authorized' @click="validateEvents(true)" disabled>Accept submitted
								event(s)</v-btn>
							<v-btn v-if="authorized && selectedSubmittedEvents.length > 0"
								@click="validateEvents(false)">Reject submitted event(s)</v-btn>
							<v-btn v-else-if='authorized' @click="validateEvents(false)" disabled>Reject submitted
								event(s)</v-btn>
						</v-card-actions>
					</v-card>
				</v-container>
				<v-container>
					<v-card>
						<v-toolbar flat color="red darken-2" dark>
							<v-toolbar-title>Check the results</v-toolbar-title>
						</v-toolbar>
						<v-card-text>
							<p>So that's the WUTAN CALENDAR I was talking about. It will be visible by anyone on
								the internet -- no credentials required. Google Calendars are usually seen from their <a
									href="https://calendar.google.com/calendar/embed?src=3mo0a639qfhs9tjc1idmu4kkus%40group.calendar.google.com&ctz=Europe%2FZurich">home
									page</a>. I've picked Google Calendar over rivals because it
								is easy to share, can sync up any two calendars (like, I can literally fuse my private
								calendar with SWISS WUTAN's calendar) and is available on many different platforms --
								Web, Android, iPhone. Finally it can
								be easily embedded on any website supporting plain html & javascript -- such as swiss
								wutan's very own website. It also supports custom email notifications.</p>
							<p> If you have accepted events
								submissions you can now hit <v-btn @click="refreshFrame">reload</v-btn> to see the
								results
								of the newly validated events.</p>
							<p>If you are curious here's more details about the future dataflow:
								<ol>
									<li>Users submit events using the form below (done).</li>
									<li>Events are stored at one of Google databases (to do).</li>
									<li>Events that get accepted are pushed into the Swiss Wutan Calendar and erased
										from the database, visible to anyone, with or without Facebook (done)</li>
								</ol>
							</p>
						</v-card-text>
						<v-card class="d-flex pa-2" outlined tile>
							<div :key="iframe_key">
								<iframe
									src="https://calendar.google.com/calendar/embed?height=600&amp;wkst=2&amp;bgcolor=%23D50000&amp;ctz=Europe%2FZurich&amp;src=M21vMGE2MzlxZmhzOXRqYzFpZG11NGtrdXNAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ&amp;color=%23D50000&amp;showTitle=0&amp;showDate=1&amp;showPrint=0&amp;showCalendars=0&amp;showTz=0&amp;mode=MONTH&amp;hl=en_GB"
									style="border-width:0" width="900" height="600" frameborder="0"
									scrolling="no"></iframe>
							</div>
						</v-card>
					</v-card>
				</v-container>
				<v-container>
					<v-card>
						<v-toolbar flat color="red darken-2" dark>
							<v-toolbar-title>Submit new events</v-toolbar-title>
						</v-toolbar>
						<v-card-text>By contrast to the other sections of the page, this one will be visible to anyone
							on the internet. People are supposed to use it to submit new events.</v-card-text>
						<v-card class="d-flex pa-2" outlined tile>
							<v-form ref="form" v-model="valid" lazy-validation>
								<v-container>
									<v-row>
										<!-- TEXT FIELDS -->
										<v-col cols="12" md="4">
											<v-text-field v-model="author.firstName" :counter="25"
												:rules="firstNameRules" outlined label="First name" required>
											</v-text-field>
											<v-text-field v-model="author.lastName" :counter="25" :rules="lastNameRules"
												outlined label="Last name" required>
											</v-text-field>
										</v-col>
										<v-col cols="12" md="4">
											<v-text-field v-model="author.email" :rules="emailRules" label="Email"
												required outlined>
											</v-text-field>
											<v-text-field v-model="author.phone" :rules="phoneRules"
												label="Phone number" required outlined></v-text-field>
										</v-col>
										<v-col cols="12" md="4">
											<v-checkbox v-model="author.is_school" color="red darken-2"
												label="I am submitting on behalf of a Swiss Wutan school"></v-checkbox>
											<v-select v-if="author.is_school" v-model="author.school"
												:items="schools_opts" label="School" outlined
												:rules="[v => !!v || 'Deselect the previous checkbox or please do mention your school']"
												required></v-select>
										</v-col>
										<!-- DATES -->
										<v-col cols="12" sm="6" class="my-2 px-1">
											<v-date-picker ref="picker" v-model="dates" multiple color="red darken-2"
												:picker-date.sync="pickerDate" full-width></v-date-picker>
										</v-col>
										<v-col cols="12" sm="6" class="my-2 px-1">
											<div class="subheading">Here are events scheduled for the displayed month.
												Please do get in touch to avoid unfortunate overlaps.
											</div>
											<ul class="ma-4">
												<li v-for="e in thisMonthEvents">{{ e.summary }}{{ e.start.dateTime }}
												</li>
											</ul>
											<br /><br />
											<v-combobox v-model="dates" multiple chips :items="dates"
												label="Dates picked" deletable-chips></v-combobox>
											<v-text-field label="Time" value="event.time" type="time"></v-text-field>
										</v-col>
										<!-- EVENT CONTENT -->
										<v-col cols="12" md="6">
											<v-text-field v-model="event.title" label="Event title" filled required>
											</v-text-field>
											<v-select :items="levels_opts" v-model="event.levels"
												label="Suggested level(s)" deletable-chips multiple chips multiple>
											</v-select>
										</v-col>
										<v-col cols="12" md="6">
											<v-text-field v-model="event.location" label="Event location" filled
												required>
											</v-text-field>
											<v-combobox v-model="event.arts" deletable-chips multiple chips
												:items="arts_opts" label="Featured styles"></v-combobox>
										</v-col>
										<!-- MORE CHECKBOXES -->
										<v-col cols="12" md="6">
											<v-checkbox v-model="event.privacy" color="red darken-2"
												label="This event is meant only for Swiss Wutan members">
											</v-checkbox>
											<v-checkbox v-model="event.registration" color="red darken-2"
												label="Registration required">
											</v-checkbox>
										</v-col>
										<v-col cols="12" md="6">
											<v-checkbox v-model="event.discount" color="red darken-2"
												label="Swiss Wutan members get a special discount">
											</v-checkbox>
											<div id="register" v-if=event.registration>
												<v-combobox v-model="event.registration_details" :items="fillFromOpts"
													filled label="Participants register here (url, email):....">
												</v-combobox>
											</div>
										</v-col>

										<!-- COMMENTS -->
										<v-container fluid>
											<v-textarea label="If appropriate please describe the event." auto-grow
												outlined shaped v-model="event.comments"></v-textarea>
										</v-container>
										<!-- SUBMIT -->
										<v-btn :disabled="!valid" color="success" class="mr-4" @click="validate">
											Validate
										</v-btn>
										<v-btn color="error" class="mr-4" @click="reset">
											Reset Form
										</v-btn>
										<v-btn color="warning" @click="resetValidation">
											Reset Validation
										</v-btn>
									</v-row>
								</v-container>
							</v-form>
						</v-card>
					</v-card>
				</v-container>
			</v-content>
		</v-app>
	</div>
	<script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
	<script src="vue_inject.js"></script>
</body>

</html>